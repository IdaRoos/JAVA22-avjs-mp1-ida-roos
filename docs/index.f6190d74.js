const e=document.getElementById("score-list");async function t(){const t=await fetch("https://highscore-d0cb5-default-rtdb.europe-west1.firebasedatabase.app/highscores.json"),o=await t.json(),r=Object.entries(o);r.sort(((e,t)=>t[1].score-e[1].score));for(const[t,o]of r){const t=o.name,r=o.score,c=document.createElement("ul"),s=document.createElement("li"),i=document.createElement("li");s.innerText="Name: "+t,i.innerText="Score: "+r,e.append(c),c.append(s,i)}}async function o(e,o){const r=await fetch("https://highscore-d0cb5-default-rtdb.europe-west1.firebasedatabase.app/highscores.json"),c=await r.json(),s=Object.entries(c);let i=1/0,n=null;for(const[e,t]of s)t.score<i&&(i=t.score,n=e);o>i&&async function(e,t,o){const r=`https://highscore-d0cb5-default-rtdb.europe-west1.firebasedatabase.app/highscores/${o}.json`,c={name:e,score:t},s={method:"PATCH",body:JSON.stringify(c),headers:{"Content-type":"application/json"}},i=await fetch(r,s);await i.json()}(e,o,n),await t()}new class{constructor(){this.textFromInput="Anonymous player",this.playerName=document.querySelector("#player"),this.gameContainer=document.querySelector("#gameContainer"),this.computerText=document.querySelector("#computer"),this.resultText=document.querySelector("#resultText"),this.choiceBtn=document.querySelectorAll(".choiceBtn"),this.playerScoreText=document.querySelector("#scorePlayer"),this.playerChoice,this.computerChoice,this.playerScore=0,this.computerScore=0,this.nameInput=document.querySelector("#inputName"),this.nameButton=document.querySelector("#buttonName"),this.nameButton.addEventListener("click",this.handleNameSubmit.bind(this)),this.choiceBtn.forEach((e=>e.addEventListener("click",this.handleChoiceClick.bind(this))))}handleNameSubmit(e){e.preventDefault(),this.textFromInput=""===this.nameInput.value?"Anonymous player":this.nameInput.value,this.playerName.innerText=this.textFromInput+": ",document.querySelector("form").innerHTML="",this.resultText.innerText="Let's play!"}handleChoiceClick(e){this.playerChoice=e.target.value,this.playerName.textContent=`${this.textFromInput}: ${this.playerChoice}`,this.computerChoiceFunc(),this.computerText.textContent=`Computer: ${this.computerChoice}`,this.resultText.textContent=this.checkWinner(),this.playerScoreText.textContent=`Your score: ${this.playerScore}`,this.endGame()}computerChoiceFunc(){switch(this.getRandomNumber()){case 1:this.computerChoice="ROCK";break;case 2:this.computerChoice="PAPER";break;case 3:this.computerChoice="SCISSORS"}}checkWinner(){return this.playerChoice===this.computerChoice?"It's a tie!":"ROCK"===this.computerChoice?"PAPER"===this.playerChoice?(this.playerScore++,"You win! Paper beats rock."):(this.computerScore++,"You lose... Paper beats rock."):"PAPER"===this.computerChoice?"SCISSORS"===this.playerChoice?(this.playerScore++,"You win! Scissors beats paper."):(this.computerScore++,"You lose... Paper beats rock."):"SCISSORS"===this.computerChoice?"ROCK"===this.playerChoice?(this.playerScore++,"You win! Rock beats scissors"):(this.computerScore++,"You lose... Scissors beats paper."):void 0}async endGame(){if(1===this.computerScore){await o(this.textFromInput,this.playerScore);document.getElementById("score-list").innerHTML="",await t();const e=document.createElement("button");e.classList.add("playAgain"),e.innerText="Play again";const r="You lost...Your score is: "+this.playerScore;document.querySelector("#gameChoice").remove(),this.resultText.innerText=`${r} `,this.gameContainer.append(e),e.addEventListener("click",(()=>{location.reload()}))}}getRandomNumber(){return Math.ceil(3*Math.random())}};t();
//# sourceMappingURL=index.f6190d74.js.map
